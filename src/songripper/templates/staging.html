<table>
  <thead>
    <tr>
      <th colspan="6"><label><input id="select-all" type="checkbox"> Select All</label></th>
    </tr>
    <tr>
      <th></th>
      <th>Art</th>
      <th>Artist</th>
      <th>Album</th>
      <th>Title</th>
      <th>Filepath</th>
    </tr>
  </thead>
  <tbody>
  {% for track in tracks %}
    <tr>
      <td><input type="checkbox" name="track" value="{{ track.filepath }}"></td>
      <td>
        {% if track.cover %}
          <img src="{{ track.cover }}" alt="cover" class="album-art">
        {% else %}
          &mdash;
        {% endif %}
      </td>
      <td hx-get="/edit?filepath={{ track.filepath }}&field=artist" hx-trigger="click" hx-target="this" hx-swap="outerHTML">{{ track.artist }}</td>
      <td hx-get="/edit?filepath={{ track.filepath }}&field=album" hx-trigger="click" hx-target="this" hx-swap="outerHTML">{{ track.album }}</td>
      <td hx-get="/edit?filepath={{ track.filepath }}&field=title" hx-trigger="click" hx-target="this" hx-swap="outerHTML">{{ track.title }}</td>
      <td>{{ track.filepath }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<form id="multi-edit" hx-post="/edit-multiple" hx-swap="none"
      hx-include="[name=track]:checked"
      hx-on:afterRequest="document.body.dispatchEvent(new Event('refreshStaging'))">
  <div>
    <label><input type="checkbox" name="artist_enable"> Artist</label>
    <input type="text" name="artist_value"></div>
  <div>
    <label><input type="checkbox" name="album_enable"> Album</label>
    <input type="text" name="album_value"></div>
  <div>
    <label><input type="checkbox" name="title_enable"> Title</label>
    <input type="text" name="title_value"></div>
  <button type="submit">Edit Multiple</button>
</form>
